{
  "hash": "f76044d398b4df5e47e96a9791b6d6fe",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Lab 1 - Data visualization\"\n---\n\n\n# Introduction\n\nThis lab will introduce you to the course computing workflow.\nThe main goal is to reinforce our demo of R and RStudio, which we will be using throughout the course both to learn the statistical concepts discussed in the course and to analyze real data and come to informed conclusions.\n\n::: callout-note\nR is the name of the programming language itself and RStudio is a convenient interface, commonly referred to as an integrated development environment or an IDE, for short.\n:::\n\nAn additional goal is to reinforce Git and GitHub, the version control, web hosting, and collaboration systems that we will be using throughout the course.\n\n::: callout-note\nGit is a version control system (like \"Track Changes\" features from Microsoft Word but more powerful) and GitHub is the home for your Git-based projects on the internet (like DropBox but much better).\n:::\n\nAs the labs progress, you are encouraged to explore beyond what the labs dictate; a willingness to experiment will make you a much better programmer.\nBefore we get to that stage, however, you need to build some basic fluency in R.\nToday we begin with the fundamental building blocks of R and RStudio: the interface, reading in data, and basic commands.\n\n::: callout-warning\nThis lab assumes that you have already completed [Lab 0](/labs/lab-0.html).\nIf you have not, please go back and do that first before proceeding.\n:::\n\n## Learning objectives\n\nBy the end of the lab, you will...\n\n-   Be familiar with the workflow using R, RStudio, Git, and GitHub\n-   Gain practice writing a reproducible report using Quarto\n-   Practice version control using Git and GitHub\n-   Be able to create data visualizations using `ggplot2`\n\n## Getting started\n\n### Log in to RStudio\n\n-   Go to <https://cmgr.oit.duke.edu/containers> and login with your Duke NetID and Password.\n-   Click `STA198-199` under My reservations to log into your container. You should now see the RStudio environment.\n\n### Clone the repo & start new RStudio project\n\n-   Go to the course organization at [github.com/sta199-s24](https://github.com/sta199-s24) organization on GitHub.\n    Click on the repo with the prefix **lab-1**.\n    It contains the starter documents you need to complete the lab.\n\n-   Click on the green **CODE** button, select **Use SSH** (this might already be selected by default, and if it is, you'll see the text **Clone with SSH**).\n    Click on the clipboard icon to copy the repo URL.\n\n-   In RStudio, go to *File* ➛ *New Project* ➛*Version Control* ➛ *Git*.\n\n-   Copy and paste the URL of your assignment repo into the dialog box *Repository URL*. Again, please make sure to have *SSH* highlighted under *Clone* when you copy the address.\n\n-   Click *Create Project*, and the files from your GitHub repo will be displayed in the *Files* pane in RStudio.\n\n-   Click *lab-1.qmd* to open the template Quarto file.\n    This is where you will write up your code and narrative for the lab.\n\n### R and R Studio\n\nBelow are the components of the RStudio IDE.\n\n![](images/lab-0/rstudio.png){fig-alt=\"RStudio IDE\"}\n\nBelow are the components of a Quarto (.qmd) file.\n\n![](images/lab-0/quarto.png){fig-alt=\"Quarto document\"}\n\n### YAML\n\nThe top portion of your R Markdown file (between the three dashed lines) is called **YAML**.\nIt stands for \"YAML Ain't Markup Language\".\nIt is a human friendly data representation for all programming languages.\nAll you need to know is that this area is called the YAML (we will refer to it as such) and that it contains meta information about your document.\n\n::: callout-important\nOpen the Quarto (`.qmd`) file in your project, change the author name to your name, and render the document.\nExamine the rendered document.\n:::\n\n### Committing changes\n\nNow, go to the Git pane in your RStudio instance.\nThis will be in the top right hand corner in a separate tab.\n\nIf you have made changes to your Quarto (.qmd) file, you should see it listed here.\nClick on it to select it in this list and then click on **Diff**.\nThis shows you the *diff*erence between the last committed state of the document and its current state including changes.\nYou should see deletions in red and additions in green.\n\nIf you're happy with these changes, we'll prepare the changes to be pushed to your remote repository.\nFirst, **stage** your changes by checking the appropriate box on the files you want to prepare.\nNext, write a meaningful commit message (for instance, \"updated author name\") in the **Commit message** box.\nFinally, click **Commit**.\nNote that every commit needs to have a commit message associated with it.\n\nYou don't have to commit after every change, as this would get quite tedious.\nYou should commit states that are *meaningful to you* for inspection, comparison, or restoration.\n\nIn the first few assignments we will tell you exactly when to commit and in some cases, what commit message to use.\nAs the semester progresses we will let you make these decisions.\n\nNow let's make sure all the changes went to GitHub.\nGo to your GitHub repo and refresh the page.\nYou should see your commit message next to the updated files.\nIf you see this, all your changes are on GitHub and you're good to go!\n\n### Pushing changes\n\nNow that you have made an update and committed this change, it's time to push these changes to your repo on GitHub.\n\nIn order to push your changes to GitHub, you must have **staged** your **commit** to be pushed.\nclick on **Push**.\n\n## Packages\n\nIn this lab we will work with the **tidyverse** package, which is a collection of packages for doing data analysis in a \"tidy\" way.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n**Render** the document which loads this package with the `library()` function.\n\n::: callout-note\nThe rendered document will include a message about which packages the tidyverse package is loading along with it.\nIt's just R being informative, a **message** does not indicate anything is wrong (it's not a **warning** or an **error**).\n:::\n\nThe tidyverse is a meta-package.\nWhen you load it you get nine packages loaded for you:\n\n-   **dplyr**: for data wrangling\n-   **forcats**: for dealing with factors\n-   **ggplot2**: for data visualization\n-   **lubridate**: for dealing with dates\n-   **purrr**: for iteration with functional programming\n-   **readr**: for reading and writing data\n-   **stringr**: for string manipulation\n-   **tibble**: for modern, tidy data frames\n-   **tidyr**: for data tidying and rectangling\n\nThe message that's printed when you load the package tells you which versions of these packages are loaded as well as any conflicts they may have introduced, e.g., the `filter()` function from dplyr has now masked (overwritten) the `filter()` function available in base R (and that's ok, we'll use `dplyr::filter()` anyway).\n\nYou can now **Render** your template document and see the results.\n\n## Guidelines\n\nAs we've discussed in lecture, your plots should include an informative title, axes should be labeled, and careful consideration should be given to aesthetic choices.\n\nIn addition, the code should all the code should be be able to be read (not run off the page) when you render to PDF.\nMake sure that is the case, and add line breaks where the code is running off the page.[^1]\n\n[^1]: Remember, haikus not novellas when writing code!\n\nRemember that continuing to develop a sound workflow for reproducible data analysis is important as you complete the lab and other assignments in this course.\nThere will be periodic reminders in this assignment to remind you to **render, commit, and push** your changes to GitHub.\nYou should have at least 3 commits with meaningful commit messages by the end of the assignment.\n\n# Questions\n\n## Part 1\n\n**Let's take a trip to the Midwest!**\n\nWe will use the `midwest` data frame for this lab.\nIt is part of the **ggplot2** R package, so the `midwest` data set is automatically loaded when you load the tidyverse package.\n\nThe data contains demographic characteristics of counties in the Midwest region of the United States.\n\nBecause the data set is part of the **ggplot2** package, you can read documentation for the data set, including variable definitions by typing `?midwest` in the Console or searching for `midwest` in the Help pane.\n\n### Question 1\n\nVisualize the distribution of population density of counties using a histogram with `geom_histogram()` with four separate binwidths: a binwidth of 100, a binwidth of 1,000, a binwidth of 10,000, and a binwidth of 100,000.\nFor example, you can create the first plot with:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(midwest, aes(x = popdensity)) +\n  geom_histogram(binwidth = 100) +\n  labs(\n    x = \"Population density\",\n    y = \"Count\",\n    title = \"Population density of midwesten counties\",\n    subtitle = \"Binwidth = 100\"\n  )\n```\n:::\n\n\nYou will need to make four different histograms.\nMake sure to set informative titles and axis labels for each of your plots.\nThen, comment on which binwidth is most appropriate for these data and why.\n\n::: render-commit-push\nRender, commit, and push your changes to GitHub with the commit message \"Added answer for Question 1\".\n\nMake sure to commit and push all changed files so that your Git pane is empty afterward.\n:::\n\n### Question 2\n\nVisualize the distribution of population density of counties again, this time using a boxplot with `geom_boxplot()`.\nMake sure to set informative titles and axis labels for your plot.\nThen, using information as needed from the box plot as well as the histogram from Question 1, describe the distribution of population density of counties and comment on any potential outliers, making sure to identify at least one county that is a clear outlier by name in your narrative and commenting on whether it makes sense to you that this county is an outlier.\nYou can use the data viewer to identify the outliers interactively, you do not have to write code to identify them.\n\n::: render-commit-push\nRender, commit, and push your changes to GitHub with the commit message \"Added answer for Question 2\".\n\nMake sure to commit and push all changed files so that your Git pane is empty afterward.\n:::\n\n### Question 3\n\nCreate a scatterplot of the percentage below poverty (`percbelowpoverty` on the y-axis) versus percentage of people with a college degree (`percollege` on the x-axis), where the color [**and**]{.underline} shape of points are determined by `state`.\nMake sure to set informative titles, axis, and legend labels for your plot.\nFirst, describe the overall relationship between percentage of people with a college degree and percentage below poverty in Midwestern states, making sure to identify at least one county that is a clear outlier by name in your narrative.\nYou can use the data viewer to identify the outliers interactively, you do not have to write code to identify them.\nThen, comment on whether you can identify how this relationship varies across states.\n\n::: render-commit-push\nRender, commit, and push your changes to GitHub with the commit message \"Added answer for Question 3\".\n\nMake sure to commit and push all changed files so that your Git pane is empty afterward.\n:::\n\n### Question 4\n\nNow, let's examine the relationship between the same two variables, once again using different colors and shapes to represent each state, and using a separate plot for each state, i.e., with faceting with `facet_wrap()`.\nIn addition to points (`geom_point()`), represent the data with a smooth curve fit to the data with `geom_smooth()`, with the argument `se = FALSE`.\nMake sure to set informative titles, axis, and legend labels for your plot.\nWhich plot do you prefer - this plot or the plot in Question 3?\nBriefly explain your choice.\n\n::: callout-note\n`se = FALSE` removes the confidence bands around the line.\nThese bands show the uncertainty around the smooth curve.\nWe'll discuss uncertainty around estimates later in the course and bring these bands back then.\n:::\n\n::: render-commit-push\nRender, commit, and push your changes to GitHub with the commit message \"Added answer for Question 4\".\n\nMake sure to commit and push all changed files so that your Git pane is empty afterward.\n:::\n\n### Question 5\n\n*Do some states have counties that tend to be geographically larger than others?*\n\nTo explore this question, create side-by-side boxplots of area (`area`) of a county based on state (`state`).\nHow do typical county area sizes compare across states?\nHow do variabilities of county sizes compare across states?\nWhich state has the single largest county?\nIdentify the name of this county.\nYou can use the data viewer to identify it interactively, you do not have to write code.\n\n::: render-commit-push\nNow is another good time to render, commit, and push your changes to GitHub with a meaningful commit message.\n\nOnce again, make sure to commit and push all changed files so that your Git pane is empty afterwards.\n:::\n\n### Question 6\n\n*Do some states have a higher percentage of their counties located in a metropolitan area?*\n\nCreate a segmented bar chart with one bar per state and the bar filled with colors according to the value of `metro` – one color indicating `Yes` and the other color indicating `No` for whether a county is considered to be a metro area.\nThe y-axis of the segmented barplot should range from 0 to 1, indicating proportions.\nCompare the percentage of counties in metro areas across the states based on this plot.\nMake sure to supplement your narrative with rough estimates of these percentages.\n\n::: callout-tip\n## Hint\n\nFor this question, you should begin with the data wrangling pipeline below.\nWe will learn more about data wrangling in the coming weeks, so this is a mini-preview.\nThis pipeline creates a new variable called `metro` based on the value of the existing variable called `inmetro`.\nIf the value of `inmetro` is equal to 1 (`inmetro == 1`), it sets the value of `metro` to `\"Yes\"`, and if not, it sets the value of `metro` to `\"No\"`.\nThe resulting data frame is assigned back to `midwest`, overwriting the existing `midwest` data frame with a version that includes the new `metro` variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmidwest <- midwest |>\n  mutate(metro = if_else(inmetro == 1, \"Yes\", \"No\"))\n```\n:::\n\n:::\n\n::: render-commit-push\nNow is another good time to render, commit, and push your changes to GitHub with a meaningful commit message.\n\nAnd once again, make sure to commit and push all changed files so that your Git pane is empty afterward.\nWe keep repeating this because it's important and because we see students forget to do this.\nSo take a moment to make sure you're following along with the version control instructions.\n:::\n\n### Question 7\n\nRecreate the plot below, and then give it a title.\nThen, identify at least one county that is a clear outlier in Wisconsin (WI) by name.\nYou can use the data viewer to identify them interactively, you do not have to write code.\nComment on the population composition of this county by investigating the percentage of other races living there.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](lab-1_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n::: callout-tip\n## Hint\n\n-   [The `ggplot2` reference for themes](https://ggplot2.tidyverse.org/reference/ggtheme.html) will be helpful in determining the theme.\n-   The `size` of the points is 2.\n-   The transparency (`alpha`) of the points is 0.5.\n-   You can put line breaks in labels with `\\n`.\n:::\n\n::: render-commit-push\nRender, commit, and push your final changes to GitHub with a meaningful commit message.\n\nMake sure to commit and push all changed files so that your Git pane is empty afterwards.\n:::\n\n## Part 2\n\n**Enough about the Midwest!**\n\nIn this part we will use a new, more recent, and potentially more relevant dataset on counties in North Carolina.\n\nThis dataset is stored in a file called `nc-county.csv` in the `data` folder of your project/repository.\n\nYou can read this file into R with the following code:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnc_county <- read_csv(\"data/nc-county.csv\")\n```\n:::\n\n\nThis will read the CSV (comma separated values) file from the `data` folder and store the dataset as a data frame called `nc_county` in R.\n\nThe variables in the dataset and their descriptions are as follows:\n\n-   `county`: Name of county.\n-   `state_abb`: State abbreviation (NC).\n-   `state_name`: State name (North Carolina).\n-   `land_area_m2`: Land area of county in meters-squared, based on the 2020 census.\n-   `land_area_mi2`: Land area of county in miles-squared, based on the 2020 census.\n-   `population`: Population of county, based on the 2020 census.\n-   `density`: Population density calculated as population divided by land area in miles-squared.\n\nIn addition to being more recent and more relevant, this dataset is also more complete in the sense that we know the units of population density: people per mile-squared!\n\n### Question 8\n\nFirst, guess what the relationship between population density and land area might be – positive?\nnegative?\nno relationship?\n\nThen, make a scatter plot of population density (`density` on the y-axis) vs. land area in miles-squared (`land_area_mi2` on the x-axis).\nMake sure to set an informative title and axis labels for your plot.\nDescribe the relationship.\nWas your guess correct?\n\n### Question 9\n\nNow make a scatter plot of population density (`density` on the y-axis) vs. land area in meters-squared (`land_area_m2` on the x-axis).\nMake sure to set an informative title and axis labels for your plot.\nComment on how this scatterplot compares to the one in Exercise 8 — is the relationship displayed same or different.\nExplain why.\n\n### Question 10\n\nDid you select your pages on Gradescope?\nYou don't need to write an answer for this question, if you select your pages when you upload your lab to Gradescope, you'll get full points on this question.\nOtherwise, you'll get a 0 on this question.[^2]\n\n[^2]: We're assigning points to this seemingly trivial task because not selecting your pages and questions will greatly slow down the grading.\n    So we want to make sure you're properly motivated to complete this task!\n\n# Wrap-up\n\n## Submission\n\nOnce you are finished with the lab, you will submit your final PDF document to Gradescope.\n\n::: callout-warning\nBefore you wrap up the assignment, make sure all of your documents are updated on your GitHub repo.\nWe will be checking these to make sure you have been practicing how to commit and push changes.\n\nYou must turn in a PDF file to the Gradescope page by the submission deadline to be considered \"on time\".\n:::\n\nTo submit your assignment:\n\n-   Go to <http://www.gradescope.com> and click *Log in* in the top right corner.\n-   Click *School Credentials* $\\rightarrow$ *Duke NetID* and log in using your NetID credentials.\n-   Click on your *STA 199* course.\n-   Click on the assignment, and you'll be prompted to submit it.\n-   Mark all the pages associated with question. All the pages of your lab should be associated with at least one question (i.e., should be \"checked\").\n\n::: callout-important\n## Checklist\n\nMake sure you have:\n\n-   attempted all questions\n-   rendered your Quarto document\n-   committed and pushed everything to your GitHub repository such that the Git pane in RStudio is empty\n-   uploaded your PDF to Gradescope\n-   selected pages associated with each question on Gradescope\n:::\n\n## Grading\n\nThe lab is graded out of a total of 50 points.\n\nOn Questions 1 through 9, you can earn up to 5 points on each question:\n\n-   5: Response shows excellent understanding and addresses all or almost all of the rubric items.\n\n-   4: Response shows good understanding and addresses most of the rubric items.\n\n-   3: Response shows understanding and addresses a majority of the rubric items.\n\n-   2: Response shows effort and misses many of the rubric items.\n\n-   1: Response does not show sufficient effort or understanding and/or is largely incomplete.\n\n-   0: No attempt.\n\nOn Question 10, you can earn either 0 or 5 points for selecting questions and pages on Gradescope:\n\n-   5: Selected questions and pages on Gradescope.\n-   0: Did not select some or all questions and pages on Gradescope.\n",
    "supporting": [
      "lab-1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}