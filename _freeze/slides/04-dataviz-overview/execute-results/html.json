{
  "hash": "1854d01d32a9fbbaa0795f1cb70e0d6d",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Data visualization overview\"\nsubtitle: \"Lecture 4\"\ndate: \"January 25, 2024\"\nformat: \n  revealjs:\n    footer: \"[üîó sta199-s24.github.io](https://sta199-s24.github.io/) &nbsp;¬∑&nbsp; [‚ùì Ask on Ed](https://edstem.org/us/courses/50730/discussion/4185738)\"\neditor_options: \n  chunk_output_type: console\n---\n\n\n# Warm up\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: ggplot2\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n‚îÄ‚îÄ Attaching core tidyverse packages ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse 2.0.0 ‚îÄ‚îÄ\n‚úî dplyr     1.1.4     ‚úî readr     2.1.4\n‚úî forcats   1.0.0     ‚úî stringr   1.5.1\n‚úî lubridate 1.9.3     ‚úî tibble    3.2.1\n‚úî purrr     1.0.2     ‚úî tidyr     1.3.0\n‚îÄ‚îÄ Conflicts ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ tidyverse_conflicts() ‚îÄ‚îÄ\n‚úñ dplyr::filter() masks stats::filter()\n‚úñ dplyr::lag()    masks stats::lag()\n‚Ñπ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n:::\n\n\n## While you wait...\n\n**Questions from the prepare materials?**\n\n\n```{=html}\n<iframe allowfullscreen frameborder=\"0\" height=\"100%\" mozallowfullscreen style=\"min-width: 500px; min-height: 355px\" src=\"https://app.wooclap.com/STA199S24?from=status-bar?\" width=\"100%\"></iframe>\n```\n\n## Announcements {.smaller}\n\n-   Lab 1 due Monday morning at 8 am.\n\n    -   My office hours today after class + 2-3 pm in Old Chem 213\n\n    -   Lots of TA office hours, including over the weekend\n\n    -   Submitting late and want to use your one-time waiver?\n        Email our course coordinator [Dr. Mary Knox](https://sta199-s24.github.io/course-team.html#course-coordinator).\n\n-   AEs this week should be submitted by midnight on Sunday.\n    To \"submit\", commit and push at least once to your `ae` repo for each application exercise this week.\n\n-   Pilot: Ed Discussion threads for lecture, linked at the bottom of each slide.\n\n![](images/ed-discussion-01-25.png){fig-align=\"center\"}\n\n## Questions from last time {.smaller}\n\n**Many of the questions in Lab 1 are subjective. How does that work?**\n\n> identify at least one outlier\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/popdensity-boxplot-1-1.png){width=480}\n:::\n:::\n\n\n## Questions from last time {.smaller}\n\n**Many of the questions in Lab 1 are subjective. How does that work?**\n\n> identify at least one outlier ‚úÖ\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/popdensity-boxplot-2-1.png){width=480}\n:::\n:::\n\n\n## Questions from last time {.smaller}\n\n**Many of the questions in Lab 1 are subjective. How does that work?**\n\n> identify at least one outlier ‚ùå\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/popdensity-boxplot-3-1.png){width=480}\n:::\n:::\n\n\n## Questions from last time {.smaller}\n\n**What are some situations where waffle plots are better than pie charts?**\n\nLet's take a look at an example...\n\n## ü•ß or üßá?\n\n::: panel-tabset\n## Question\n\nWhich of the following is a better representation for the number of counties in each `midwest`ern state?\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/pie-1.png){width=480}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/waffle-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Vote\n\n\n```{=html}\n<iframe allowfullscreen frameborder=\"0\" height=\"100%\" mozallowfullscreen style=\"min-width: 500px; min-height: 355px\" src=\"https://app.wooclap.com/STA199S24?from=status-bar?\" width=\"100%\"></iframe>\n```\n\n:::\n\n## ü•ß or üßá or {{< fa table >}}? {.smaller}\n\n::: panel-tabset\n## Question\n\nWhich of the following is a better representation for the number of counties in each `midwest`ern state?\n\n::: columns\n::: {.column width=\"30%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-7-1.png){width=480}\n:::\n:::\n\n:::\n\n::: {.column width=\"30%\"}\n\n::: {.cell}\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-8-1.png){width=480}\n:::\n:::\n\n:::\n\n::: {.column width=\"40%\"}\n\n::: {.cell}\n\n```{.r .cell-code}\nmidwest |> \n  count(state, sort = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 √ó 2\n  state     n\n  <chr> <int>\n1 IL      102\n2 IN       92\n3 OH       88\n4 MI       83\n5 WI       72\n```\n\n\n:::\n:::\n\n:::\n:::\n\n## Vote\n\n\n```{=html}\n<iframe allowfullscreen frameborder=\"0\" height=\"100%\" mozallowfullscreen style=\"min-width: 500px; min-height: 355px\" src=\"https://app.wooclap.com/STA199S24?from=status-bar?\" width=\"100%\"></iframe>\n```\n\n:::\n\n# From last time\n\n## Packages\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(palmerpenguins)\nlibrary(tidyverse)\nlibrary(ggthemes)\n```\n:::\n\n\n## Bivariate analysis {.smaller}\n\n::: panel-tabset\n## Plot\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/penguins-box-1.png){width=480}\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_density()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/penguins-density-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Code\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Side-by-side box plots\nggplot(penguins, aes(x = body_mass_g, y = species, fill = species)) +\n  geom_boxplot(alpha = 0.5, show.legend = FALSE) +\n  scale_fill_colorblind() +\n  labs(\n    x = \"Body mass (grams)\", y = \"Species\",\n    title = \"Side-by-side box plots\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_boxplot()`).\n```\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Density plots\nggplot(penguins, aes(x = body_mass_g, fill = species)) +\n  geom_density(alpha = 0.5) +\n  theme(legend.position = \"bottom\") +\n  scale_fill_colorblind() +\n  labs(\n    x = \"Body mass (grams)\", y = \"Density\",\n    fill = \"Species\", title = \"Density plots\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_density()`).\n```\n\n\n:::\n:::\n\n:::\n\n## Violin plots\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|4|5|8\"}\nggplot(\n  penguins,\n  aes(\n    x = species,\n    y = body_mass_g\n    )\n  ) +\n  geom_violin()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-16-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Multiple geoms\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n  penguins,\n  aes(\n    x = species,\n    y = body_mass_g\n    )\n  ) +\n  geom_violin() +\n  geom_point()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-18-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Multiple geoms\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"9\"}\nggplot(\n  penguins,\n  aes(\n    x = species,\n    y = body_mass_g\n    )\n  ) +\n  geom_violin() +\n  geom_jitter()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-20-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Multiple geoms + aesthetics\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"5-6\"}\nggplot(\n  penguins,\n  aes(\n    x = species,\n    y = body_mass_g,\n    color = species\n    )\n  ) +\n  geom_violin() +\n  geom_jitter()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-22-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Multiple geoms + aesthetics\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"11-13\"}\nggplot(\n  penguins,\n  aes(\n    x = species,\n    y = body_mass_g,\n    color = species\n    )\n  ) +\n  geom_violin() +\n  geom_jitter() +\n  theme(\n    legend.position = \"none\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-24-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n## Multiple geoms + aesthetics {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"14\"}\nggplot(\n  penguins,\n  aes(\n    x = species,\n    y = body_mass_g,\n    color = species\n    )\n  ) +\n  geom_violin() +\n  geom_jitter() +\n  theme(\n    legend.position = \"none\"\n  ) +\n  scale_color_colorblind()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n:::\n\n:::\n\n::: {.column width=\"50%\"}\n\n::: {.cell}\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing non-finite values (`stat_ydensity()`).\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values (`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/unnamed-chunk-26-1.png){width=480}\n:::\n:::\n\n:::\n:::\n\n# Multivariate analysis\n\n## Bechdel {.smaller}\n\nLoad the Bechdel test data with `read_csv()`:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbechdel <- read_csv(\"https://sta199-s24.github.io/data/bechdel.csv\")\n```\n:::\n\n\n. . .\n\n<br>\n\nView the column `names()` of the `bechdel` data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnames(bechdel)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"title\"       \"year\"        \"gross_2013\"  \"budget_2013\" \"roi\"         \"binary\"     \n[7] \"clean_test\" \n```\n\n\n:::\n:::\n\n\n## ROI by test result {.smaller}\n\n::: question\nWhat about this plot makes it difficult to evaluate how ROI varies by Bechdel test result?\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(bechdel, aes(x = roi, y = clean_test, color = binary)) +\n  geom_boxplot()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 15 rows containing non-finite values (`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/roi-test-binary-box-1.png){width=768}\n:::\n:::\n\n\n## Movies with high ROI {.smaller}\n\n::: question\nWhat are the movies with highest ROI?\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nbechdel |>\n  filter(roi > 400) |>\n  select(title, roi, budget_2013, gross_2013, year, clean_test)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 √ó 6\n  title                     roi budget_2013 gross_2013  year clean_test\n  <chr>                   <dbl>       <dbl>      <dbl> <dbl> <chr>     \n1 Paranormal Activity      671.      505595  339424558  2007 dubious   \n2 The Blair Witch Project  648.      839077  543776715  1999 ok        \n3 El Mariachi              583.       11622    6778946  1992 nowomen   \n```\n\n\n:::\n:::\n\n\n## ROI by test result {.smaller}\n\n::: question\n**Zoom in:** What about this plot makes it difficult to evaluate how ROI varies by Bechdel test result?\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|3\"}\nggplot(bechdel, aes(x = roi, y = clean_test, color = binary)) +\n  geom_boxplot() +\n  coord_cartesian(xlim = c(0, 15))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 15 rows containing non-finite values (`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/roi-test-binary-box-zoom-1.png){width=768}\n:::\n:::\n\n\n## Sneak preview...\n\n<br> <br>\n\n::: hand\nto next week's data wrangling pipelines...\n:::\n\n## Median ROI\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2\"}\nbechdel |>\n  summarize(median_roi = median(roi, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1 √ó 1\n  median_roi\n       <dbl>\n1       3.91\n```\n\n\n:::\n:::\n\n\n## Median ROI by test result\n\n\n::: {.cell}\n\n```{.r .cell-code  code-line-numbers=\"|2|3\"}\nbechdel |>\n  group_by(clean_test) |>\n  summarize(median_roi = median(roi, na.rm = TRUE))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 √ó 2\n  clean_test median_roi\n  <chr>           <dbl>\n1 dubious          3.80\n2 men              3.96\n3 notalk           3.69\n4 nowomen          3.27\n5 ok               4.21\n```\n\n\n:::\n:::\n\n\n## ROI by test result ‚Äì zoom in {.smaller}\n\n::: question\nWhat does this plot say about return-on-investment on movies that pass the Bechdel test?\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(bechdel, aes(x = roi, y = clean_test, color = binary)) +\n  geom_boxplot() +\n  coord_cartesian(xlim = c(0, 15)) +\n  geom_vline(xintercept = 4.21, linetype = \"dashed\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 15 rows containing non-finite values (`stat_boxplot()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](04-dataviz-overview_files/figure-revealjs/roi-test-binary-box-zoom-vline-1.png){width=864}\n:::\n:::\n\n\n# Application exercise\n\n## `ae-03-duke-forest` {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n**If you've been here for a while:**\n\n*and following along with the application exercises...*\n\nGo to the project navigator in RStudio (top right corner of your RStudio window) and open the project called `ae`.\nIf there are any uncommitted files, commit them, and then click **Pull**.\n:::\n\n::: {.column width=\"50%\"}\n**If you've new:**\n\n*or haven't been following along with the application exercises...*\n\nGo to the course [GitHub org](https://github.com/sta199-f22-1) and find your `ae` repo.\nClone the repo in your container, open the Quarto document called `ae-03-duke-forest`.\n:::\n:::\n",
    "supporting": [
      "04-dataviz-overview_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}