{
  "hash": "a3f623e9f3ff1eaa94f0407b75eae790",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Model selection and overfitting\"\nsubtitle: \"Lecture 18\"\ndate: \"March 26, 2024\"\nformat: \n  revealjs:\n    footer: \"[üîó sta199-s24.github.io](https://sta199-s24.github.io/) &nbsp;¬∑&nbsp; [‚ùì Ask on Ed](https://edstem.org/us/courses/50730)\"\n---\n\n\n\n# Warm up\n\n\n\n::: {.cell}\n\n:::\n\n\n\n## While you wait for class to begin...\n\n::: nonincremental\nAny questions from prepare materials?\n:::\n\n\n\n```{=html}\n<iframe allowfullscreen frameborder=\"0\" height=\"100%\" mozallowfullscreen style=\"min-width: 500px; min-height: 355px\" src=\"https://app.wooclap.com/STA199S24?from=status-bar?\" width=\"100%\"></iframe>\n```\n\n\n## Announcements\n\n-   Read the feedback (including written feedback) on labs\n\n-   Project repos to be released back to you on Friday\n\n-   Status update emails in your inbox\n\n# Questions from last time {.smaller}\n\n## Can you review the `augment()` function? {.smaller}\n\nThe `augment()` function can be used to \"augment\" a data set (usually of new observations) with the model.\n\n::: incremental\n-   It calculates predictions, $\\hat{y}$s, under the given model.\n\n-   It also calculates the residuals, $e$s, for each observation.\n\n-   It returns a data frame of the input data *augmented* with predicted values and residuals.\n:::\n\n## `augment()` - Setup\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tidymodels)\n\nmtcars_fit <- linear_reg() |>\n  fit(mpg ~ disp + cyl, data = mtcars)\n\ntidy(mtcars_fit)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 √ó 5\n  term        estimate std.error statistic  p.value\n  <chr>          <dbl>     <dbl>     <dbl>    <dbl>\n1 (Intercept)  34.7       2.55       13.6  4.02e-14\n2 disp         -0.0206    0.0103     -2.01 5.42e- 2\n3 cyl          -1.59      0.712      -2.23 3.37e- 2\n```\n\n\n:::\n:::\n\n\n\n## `augment()` - Augment the original data {.smaller}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\naugment(mtcars_fit, new_data = mtcars)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 32 √ó 13\n   .pred .resid   mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   <dbl>  <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl> <dbl>\n 1  21.8 -0.844  21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2  21.8 -0.844  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3  26.1 -3.29   22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4  19.8  1.57   21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5  14.6  4.15   18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6  20.5 -2.41   18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7  14.6 -0.253  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8  25.3 -0.892  24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9  25.4 -2.61   22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10  21.7 -2.49   19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# ‚Ñπ 22 more rows\n```\n\n\n:::\n:::\n\n\n\n## `augment()` - Augment new data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnew_cars <- tibble(\n  mpg = c(23, 22), disp = c(150, 350), cyl = c(4, 6)\n)\n\nnew_cars\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 √ó 3\n    mpg  disp   cyl\n  <dbl> <dbl> <dbl>\n1    23   150     4\n2    22   350     6\n```\n\n\n:::\n:::\n\n\n\n. . .\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\naugment(mtcars_fit, new_data = new_cars)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 √ó 5\n  .pred .resid   mpg  disp   cyl\n  <dbl>  <dbl> <dbl> <dbl> <dbl>\n1  25.2  -2.22    23   150     4\n2  17.9   4.07    22   350     6\n```\n\n\n:::\n:::\n\n\n\n## What is the difference between $R^2$ and adjusted $R^2$? {.smaller}\n\n-   $R^2$:\n\n    -   Proportion of variability in the outcome explained by the model.\n\n    -   Useful for quantifying the fit of a given model.\n\n. . .\n\n-   Adjusted $R^2$:\n\n    -   Proportion of variability in the outcome explained by the model, with a penalty added for the number of predictors in the model.\n\n    -   Useful for comparing models.\n\n# From last time\n\n## Application exercise: `ae-13-modeling-loans` {.smaller}\n\n::: appex\n-   Go to your project called `ae`.\n-   Continue working on `ae-13-modeling-loans.qmd`.\n:::\n\n**Goals:**\n\n-   Review prediction and interpretation of model results\n-   Review main and interaction effects models\n-   Discuss model selection further\n\n## Recap: `ae-13-modeling-loans`\n\n-   What is the practical difference between a model with parallel and non-parallel lines?\n\n-   What is the definition of R-squared?\n\n-   Why do we choose models based on adjusted R-squared and not R-squared?\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}